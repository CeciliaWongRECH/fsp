<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: Capacitive Touch Middleware (rm_touch)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v0.8.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___t_o_u_c_h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">Capacitive Touch Middleware (rm_touch)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafa9a9e5c3000e3daedd1050fa0d942fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#gafa9a9e5c3000e3daedd1050fa0d942fd">RM_TOUCH_Open</a> (<a class="el" href="group___t_o_u_c_h___a_p_i.html#ga2c561c31be5889b86a8a984a1384920d">touch_ctrl_t</a> *const p_ctrl, <a class="el" href="group___t_o_u_c_h___a_p_i.html#structtouch__cfg__t">touch_cfg_t</a> const *const p_cfg)</td></tr>
<tr class="memdesc:gafa9a9e5c3000e3daedd1050fa0d942fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens and configures the TOUCH Middle module. Implements <a class="el" href="group___t_o_u_c_h___a_p_i.html#a229c13bc7250c5977054d981680e41ad">touch_api_t::open</a>.  <a href="#gafa9a9e5c3000e3daedd1050fa0d942fd">More...</a><br /></td></tr>
<tr class="separator:gafa9a9e5c3000e3daedd1050fa0d942fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad399083eda1add2a5f1e133df1089b82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#gad399083eda1add2a5f1e133df1089b82">RM_TOUCH_ScanStart</a> (<a class="el" href="group___t_o_u_c_h___a_p_i.html#ga2c561c31be5889b86a8a984a1384920d">touch_ctrl_t</a> *const p_ctrl)</td></tr>
<tr class="memdesc:gad399083eda1add2a5f1e133df1089b82"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function should be called each time a periodic timer expires.  <a href="#gad399083eda1add2a5f1e133df1089b82">More...</a><br /></td></tr>
<tr class="separator:gad399083eda1add2a5f1e133df1089b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17fbc878cd5f90062565187686358ad1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#ga17fbc878cd5f90062565187686358ad1">RM_TOUCH_DataGet</a> (<a class="el" href="group___t_o_u_c_h___a_p_i.html#ga2c561c31be5889b86a8a984a1384920d">touch_ctrl_t</a> *const p_ctrl, uint64_t *p_button_status, uint16_t *p_slider_position, uint16_t *p_wheel_position)</td></tr>
<tr class="memdesc:ga17fbc878cd5f90062565187686358ad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the 64-bit mask indicating which buttons are pressed.  <a href="#ga17fbc878cd5f90062565187686358ad1">More...</a><br /></td></tr>
<tr class="separator:ga17fbc878cd5f90062565187686358ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0dd11aec558632e59df46765cfb546c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#ga0dd11aec558632e59df46765cfb546c5">RM_TOUCH_Close</a> (<a class="el" href="group___t_o_u_c_h___a_p_i.html#ga2c561c31be5889b86a8a984a1384920d">touch_ctrl_t</a> *const p_ctrl)</td></tr>
<tr class="memdesc:ga0dd11aec558632e59df46765cfb546c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables specified TOUCH control block. Implements <a class="el" href="group___t_r_a_n_s_f_e_r___a_p_i.html#ade5973e7a8e994f9146e0db84bee8bf4">transfer_api_t::close</a>.  <a href="#ga0dd11aec558632e59df46765cfb546c5">More...</a><br /></td></tr>
<tr class="separator:ga0dd11aec558632e59df46765cfb546c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5de8394a70335511e9685b2aa2ea395d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#ga5de8394a70335511e9685b2aa2ea395d">RM_TOUCH_VersionGet</a> (<a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#unionfsp__version__t">fsp_version_t</a> *const p_version)</td></tr>
<tr class="separator:ga5de8394a70335511e9685b2aa2ea395d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module supports the Capacitive Touch Sensing Unit (CTSU). It implements the <a class="el" href="group___t_o_u_c_h___a_p_i.html">Touch Middleware Interface</a>. </p>
<h1><a class="anchor" id="r-touch-overview"></a>
Overview</h1>
<p>This module controls the CTSU API and provides touch buttons, sliders, and wheels. By editing the settings, the user can make various settings for these. The CTSU HAL driver is always required.</p>
<h2><a class="anchor" id="r-touch-features"></a>
Features</h2>
<p><a class="anchor" id="um_touch_slider_5position"></a>um_touch_slider_5position <a class="anchor" id="um_touch_button_on_off"></a>um_touch_button_on_off</p><ul>
<li>Supports touch buttons(Self and Mutual), sliders and wheels</li>
<li>Supports touch buttons(Self and Mutual), sliders, and wheels.<ul>
<li>The button status shows the status of up to 64 buttons in 64 bitmap.</li>
<li>The slider position is in the range of 0 to 100.</li>
<li>The Wheel position is in the range of 0 to 360.</li>
</ul>
</li>
<li>Starts scanning at any time.<ul>
<li>The scan may be started by a software trigger or an external trigger.</li>
<li>The scan completion is signalled by the callback function.</li>
</ul>
</li>
<li>Gets all results after scans are complete.</li>
<li>Additional build-time features<ul>
<li>Optional (build time) support for real-time monitoring function by QE. (Not yet available)</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="r-touch-configuration"></a>
Configuration</h1>
<p><h2>Build Time Configurations for rm_touch</h2>
The following build time configurations are defined in fsp_cfg/rm_touch_cfg.h:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Description </th></tr>
<tr>
<td>Parameter Checking</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Default (BSP)</li>
<li>
Enabled</li>
<li>
Disabled</li>
</ul>
</td><td>If selected code for parameter checking is included in the build. </td></tr>
<tr>
<td>QE_UPDATE_MONITOR</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Enabled</li>
<li>
Disabled</li>
</ul>
</td><td>If enabled,  </td></tr>
<tr>
<td>Number of buttons</td><td>Name must be a valid C symbol</td><td>Number of buttons </td></tr>
<tr>
<td>Number of sliders</td><td>Name must be a valid C symbol</td><td>Number of sliders </td></tr>
<tr>
<td>Number of wheels</td><td>Name must be a valid C symbol</td><td>Number of wheels </td></tr>
</table>
 <h2>Configurations for TOUCH Driver on rm_touch</h2>
This module can be added to the Threads tab from New -&gt; Middleware -&gt; CapTouch -&gt; TOUCH Driver on rm_touch:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Description </th></tr>
<tr>
<td>Name</td><td>Name must be a valid C symbol</td><td>Module name. </td></tr>
<tr>
<td>Number of buttons</td><td>Number of elements must be an integer greater than 0</td><td>Number of buttons </td></tr>
<tr>
<td>Number of sliders</td><td>Number of elements must be an integer greater than 0</td><td>Number of sliders  </td></tr>
<tr>
<td>Number of wheels</td><td>Number of elements must be an integer greater than 0</td><td>Number of wheels </td></tr>
<tr>
<td>on_freq</td><td>The cumulative number of determinations of ON must be an integer greater than 1</td><td>The cumulative number of determinations of ON.  </td></tr>
<tr>
<td>off_freq</td><td>The cumulative number of determinations of OFF must be an integer greater than 1</td><td>The cumulative number of determinations of OFF. </td></tr>
<tr>
<td>drift_freq</td><td>Base value drift frequency must be an integer greater than 0</td><td>Base value drift frequency. [0 : no use].  </td></tr>
<tr>
<td>cancel_freq</td><td>Maximum continuous must be an integer greater than 0</td><td>Maximum continuous ON. [0 : no use].  </td></tr>
<tr>
<td>Button elem_index 0</td><td>Element number must be an integer greater than 0</td><td>Element number used by this button 0. </td></tr>
<tr>
<td>Button elem_index 1</td><td>Element number must be an integer greater than 0</td><td>Element number used by this button 1. </td></tr>
<tr>
<td>Button threshold</td><td>judgment threshold must be an integer greater than 1</td><td>Touch/non-touch judgment threshold. </td></tr>
<tr>
<td>Button hysteresis</td><td>Threshold hysteresis must be an integer greater than 1</td><td>Threshold hysteresis for chattering prevention. </td></tr>
<tr>
<td>Slider p_elem_index</td><td>Element number array must be a valid C symbol</td><td>Element number array used by this slider. </td></tr>
<tr>
<td>Slider element index 0</td><td>Element number must be a valid C symbol</td><td>Element number used by this slider 0 </td></tr>
<tr>
<td>Slider element index 1</td><td>Element number must be a valid C symbol</td><td>Element number used by this slider 1 </td></tr>
<tr>
<td>Slider element index 2</td><td>Element number must be a valid C symbol</td><td>Element number used by this slider 2 </td></tr>
<tr>
<td>Slider element index 3</td><td>Element number must be a valid C symbol</td><td>Element number used by this slider 3 </td></tr>
<tr>
<td>Slider element index 4</td><td>Element number must be a valid C symbol</td><td>Element number used by this slider 4 </td></tr>
<tr>
<td>Slider num_elements</td><td>Number of elements must be an integer greater than 1</td><td>Number of elements used by this slider </td></tr>
<tr>
<td>Slider threshold</td><td>threshold value must be an integer greater than 1</td><td>Position calculation start threshold value. </td></tr>
<tr>
<td>Wheel p_elem_index</td><td>Element number array must be a valid C symbol</td><td>Element number array used by this wheel. </td></tr>
<tr>
<td>Wheel element index 0</td><td>Element number must be a valid C symbol</td><td>Element number used by this wheel 0 </td></tr>
<tr>
<td>Wheel element index 1</td><td>Element number must be a valid C symbol</td><td>Element number used by this wheel 1 </td></tr>
<tr>
<td>Wheel element index 2</td><td>Element number must be a valid C symbol</td><td>Element number used by this wheel 2 </td></tr>
<tr>
<td>Wheel element index 3</td><td>Element number must be a valid C symbol</td><td>Element number used by this wheel 3 </td></tr>
<tr>
<td>Wheel num_elements</td><td>Number of elements must be an integer greater than 1</td><td>Number of elements used by this wheel </td></tr>
<tr>
<td>Wheel threshold</td><td>threshold value must be an integer greater than 1</td><td>Position calculation start threshold value. </td></tr>
<tr>
<td>p_context</td><td>Name must be a valid C symbol</td><td>Callback provided when an ISR occurs </td></tr>
<tr>
<td>p_extend</td><td>Name must be a valid C symbol</td><td>Callback provided when an ISR occurs </td></tr>
</table>
</p>
<h2><a class="anchor" id="r-touch-interrupt-configuration"></a>
Interrupt Configuration</h2>
<p>Refer to CTSU <a class="el" href="group___c_t_s_u.html#r-ctsu-interrupt-configuration">Interrupt Configuration</a>.</p>
<h2><a class="anchor" id="r-touch-clock-configuration"></a>
Clock Configuration</h2>
<p>Refer to CTSU <a class="el" href="group___c_t_s_u.html#r-ctsu-clock-configuration">Clock Configuration</a>.</p>
<h2><a class="anchor" id="r-touch-pin-configuration"></a>
Pin Configuration</h2>
<p>Refer to CTSU <a class="el" href="group___c_t_s_u.html#r-ctsu-pin-configuration">Pin Configuration</a>.</p>
<h1><a class="anchor" id="r-touch-usage_notes"></a>
Usage Notes</h1>
<h2>Button</h2>
<p>Set the element number and threshold and hysteresis for each button. </p><dl class="section note"><dt>Note</dt><dd>The self capacitance or mutual capacitance is determined by the CTSU HAL driver.</dd></dl>
<h2>Slider</h2>
<p>Set the element number array and threshold for each slider. The slider determines right and left movement. This configlator support a minimum of 3 and maximum of 5 electrodes. Non touch state value of slider is "65535". </p><dl class="section note"><dt>Note</dt><dd>Valid only for self-capacitance measurement.</dd></dl>
<h2>Wheel</h2>
<p>Set the element number array and threshold for each wheel. This configlator support a minimum of 4 electrodes. Non touch state value of the wheel is "65535". </p><dl class="section note"><dt>Note</dt><dd>Valid only for self-capacitance measurement.</dd></dl>
<h2>Thereshold</h2>
<p>The value of the border between touch and non-touch.</p>
<h2>Hysterisis</h2>
<p>At self-capacitance measurement, when judging the non-touch status, the threshold value is the threshold minus the hysteresis. At mutual-capacitance measurement, when judging the non-touch status, the threshold value is the threshold plus the hysteresis.</p>
<h2>Touch/Non-touch judgement</h2>
<ul>
<li>on_freq <br />
<ul>
<li>Touch judgement occurs when the internal touch/non-touch counter reaches the setting value +1.</li>
<li>The touch counters operate on a toggle basis.</li>
<li>Touch judgement data &lt; touch judgement threshold value = touch.</li>
<li>"0" is prohibited.</li>
</ul>
</li>
<li>off_freq <br />
<ul>
<li>Non-touch judgement occurs when the internal touch/non-touch counter reaches the setting value +1.</li>
<li>The non-touch counters operate on a toggle basis.</li>
<li>Touch judgement data &gt; touch judgement threshold value = non-touch.</li>
<li>"0" is prohibited.</li>
</ul>
</li>
</ul>
<div class="image">
<object type="image/svg+xml" data="rm_touch_onfreq_threshold.svg">rm_touch_onfreq_threshold.svg</object>
<div class="caption">
Touch/Non-touch judgement Image</div></div>
 <h2>Base value drift</h2>
<ul>
<li>drift_freq <br />
<ul>
<li>The drift correction function accumulates the number of measurement values specified in Touch counter, then reflects the average of those values in reference value.</li>
<li>This feature helps prevent incorrect or undetectable touch values as the reference value continues to emulate variations in measurement resulting from slight changes in environmental and other factors.</li>
<li>"0" represents no use.</li>
</ul>
</li>
</ul>
<div class="image">
<object type="image/svg+xml" data="rm_touch_drift_freq.svg">rm_touch_drift_freq.svg</object>
<div class="caption">
Base value drift Image</div></div>
 <h2>Touch cancel value</h2>
<ul>
<li>cancel_freq <br />
<ul>
<li>When the touch state continues for a cancel_freq or longer, state becomes non-touch state. "0" represents no use.</li>
<li>If you try to set this value to something other than "0", please be careful.</li>
</ul>
</li>
</ul>
<h2>Control block</h2>
<p>A control block needs to be created according to the CTSU control block.</p>
<h1><a class="anchor" id="r-touch-examples"></a>
Examples</h1>
<h2>Basic Example</h2>
<p>This is a basic example of minimal use of the TOUCH in an application.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> touch_basic_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err = FSP_SUCCESS;</div><div class="line"></div><div class="line"></div><div class="line">    err = <a class="code" href="group___t_o_u_c_h.html#gafa9a9e5c3000e3daedd1050fa0d942fd">RM_TOUCH_Open</a>(&amp;g_touch_ctrl, &amp;g_touch_cfg);</div><div class="line">    handle_error(err);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <a class="code" href="group___t_o_u_c_h.html#gad399083eda1add2a5f1e133df1089b82">RM_TOUCH_ScanStart</a>(&amp;g_touch_ctrl);</div><div class="line">        <span class="keywordflow">while</span> (0 == g_flag)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Wait scan end callback */</span></div><div class="line">        }</div><div class="line">        g_flag = 0;</div><div class="line"></div><div class="line">        err = <a class="code" href="group___t_o_u_c_h.html#ga17fbc878cd5f90062565187686358ad1">RM_TOUCH_DataGet</a>(&amp;g_touch_ctrl, &amp;button, slider, wheel);</div><div class="line">        <span class="keywordflow">if</span> (FSP_SUCCESS == err)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Application specific data processing. */</span></div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> <h2>Multi Mode Example</h2>
<p>This is a optional exmaple of using both Self-capacitance and Mutual-capacitance. Refer to the Multi Mode Example in CTSU usage notes.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> touch_optional_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err = FSP_SUCCESS;</div><div class="line"></div><div class="line">    err = <a class="code" href="group___t_o_u_c_h.html#gafa9a9e5c3000e3daedd1050fa0d942fd">RM_TOUCH_Open</a>(&amp;g_touch_ctrl, &amp;g_touch_cfg);</div><div class="line">    handle_error(err);</div><div class="line">    err = <a class="code" href="group___t_o_u_c_h.html#gafa9a9e5c3000e3daedd1050fa0d942fd">RM_TOUCH_Open</a>(&amp;g_touch_ctrl_mutual, &amp;g_touch_cfg_mutual);</div><div class="line">    handle_error(err);</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <a class="code" href="group___t_o_u_c_h.html#gad399083eda1add2a5f1e133df1089b82">RM_TOUCH_ScanStart</a>(&amp;g_touch_ctrl);</div><div class="line">        <span class="keywordflow">while</span> (0 == g_flag)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Wait scan end callback */</span></div><div class="line">        }</div><div class="line">        g_flag = 0;</div><div class="line">        <a class="code" href="group___t_o_u_c_h.html#gad399083eda1add2a5f1e133df1089b82">RM_TOUCH_ScanStart</a>(&amp;g_touch_ctrl_mutual);</div><div class="line">        <span class="keywordflow">while</span> (0 == g_flag)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Wait scan end callback */</span></div><div class="line">        }</div><div class="line">        g_flag = 0;</div><div class="line"></div><div class="line">        err = <a class="code" href="group___t_o_u_c_h.html#ga17fbc878cd5f90062565187686358ad1">RM_TOUCH_DataGet</a>(&amp;g_touch_ctrl, &amp;button, slider, wheel);</div><div class="line">        <span class="keywordflow">if</span> (FSP_SUCCESS == err)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Application specific data processing. */</span></div><div class="line">        }</div><div class="line">        err = <a class="code" href="group___t_o_u_c_h.html#ga17fbc878cd5f90062565187686358ad1">RM_TOUCH_DataGet</a>(&amp;g_touch_ctrl_mutual, &amp;button, slider, wheel);</div><div class="line">        <span class="keywordflow">if</span> (FSP_SUCCESS == err)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Application specific data processing. */</span></div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structtouch__button__info__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#structtouch__button__info__t">touch_button_info_t</a></td></tr>
<tr class="separator:structtouch__button__info__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structtouch__slider__info__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#structtouch__slider__info__t">touch_slider_info_t</a></td></tr>
<tr class="separator:structtouch__slider__info__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structtouch__wheel__info__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#structtouch__wheel__info__t">touch_wheel_info_t</a></td></tr>
<tr class="separator:structtouch__wheel__info__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structtouch__instance__ctrl__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_o_u_c_h.html#structtouch__instance__ctrl__t">touch_instance_ctrl_t</a></td></tr>
<tr class="separator:structtouch__instance__ctrl__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structtouch__button__info__t" id="structtouch__button__info__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structtouch__button__info__t">&#9670;&nbsp;</a></span>touch_button_info_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct touch_button_info_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Information of button </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="af091c0605fb01a5b1c07c4f7ca627d6f"></a>uint64_t</td>
<td class="fieldname">
status</td>
<td class="fielddoc">
Touch result bitmap. </td></tr>
<tr><td class="fieldtype">
<a id="afb8e40fd568a052f49fb97c8a646123d"></a>uint16_t *</td>
<td class="fieldname">
p_threshold</td>
<td class="fielddoc">
Pointer to Threshold value array. g_touch_button_threshold[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="a0f464ce9e90cc330ee14a5a29f722362"></a>uint16_t *</td>
<td class="fieldname">
p_hysteresis</td>
<td class="fielddoc">
Pointer to Hysteresis value array. g_touch_button_hysteresis[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="af7abdcc4e48cb93cbe7a7656568b6990"></a>uint16_t *</td>
<td class="fieldname">
p_reference</td>
<td class="fielddoc">
Pointer to Reference value array. g_touch_button_reference[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="a846bd2e8ced2cbb4968353071d72c9e1"></a>uint16_t *</td>
<td class="fieldname">
p_on_count</td>
<td class="fielddoc">
Continuous touch counter. g_touch_button_on_count[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="aae19e8de6e651025bba4c97764c26437"></a>uint16_t *</td>
<td class="fieldname">
p_off_count</td>
<td class="fielddoc">
Continuous non-touch counter. g_touch_button_off_count[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="adf2d3937174eafd3a90b6030299a972a"></a>uint32_t *</td>
<td class="fieldname">
p_drift_buf</td>
<td class="fielddoc">
Drift reference value. g_touch_button_drift_buf[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="a2a1aefa5fda95f02bbd5d0ed2c6f0a6f"></a>uint16_t *</td>
<td class="fieldname">
p_drift_count</td>
<td class="fielddoc">
Drift counter. g_touch_button_drift_count[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="ac18122afaae130de934f8e5d20a86c13"></a>uint8_t</td>
<td class="fieldname">
on_freq</td>
<td class="fielddoc">
Copy from config by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="a662b159ab84e23e3c21c4880e46d99b0"></a>uint8_t</td>
<td class="fieldname">
off_freq</td>
<td class="fielddoc">
Copy from config by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="ad22a3ee237d9ee0e72745becc60fd7d2"></a>uint16_t</td>
<td class="fieldname">
drift_freq</td>
<td class="fielddoc">
Copy from config by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="a22a8ad9057eec231ed34b351af3463f8"></a>uint16_t</td>
<td class="fieldname">
cancel_freq</td>
<td class="fielddoc">
Copy from config by Open API. </td></tr>
</table>

</div>
</div>
<a name="structtouch__slider__info__t" id="structtouch__slider__info__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structtouch__slider__info__t">&#9670;&nbsp;</a></span>touch_slider_info_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct touch_slider_info_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Information of slider </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a329af5aff409fe723fef0e8b4e2ab8fb"></a>uint16_t *</td>
<td class="fieldname">
p_position</td>
<td class="fielddoc">
Calculated Position data. g_touch_slider_position[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="ad6f202979b432f3964729405aba0ea82"></a>uint16_t *</td>
<td class="fieldname">
p_threshold</td>
<td class="fielddoc">
Copy from config by Open API. g_touch_slider_threshold[] is set by Open API. </td></tr>
</table>

</div>
</div>
<a name="structtouch__wheel__info__t" id="structtouch__wheel__info__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structtouch__wheel__info__t">&#9670;&nbsp;</a></span>touch_wheel_info_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct touch_wheel_info_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Information of wheel </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a8a7ab2baac23ce4613b800357f58807f"></a>uint16_t *</td>
<td class="fieldname">
p_position</td>
<td class="fielddoc">
Calculated Position data. g_touch_wheel_position[] is set by Open API. </td></tr>
<tr><td class="fieldtype">
<a id="a91d7310968584c0172bea2b19d7965f6"></a>uint16_t *</td>
<td class="fieldname">
p_threshold</td>
<td class="fielddoc">
Copy from config by Open API. g_touch_wheel_threshold[] is set by Open API. </td></tr>
</table>

</div>
</div>
<a name="structtouch__instance__ctrl__t" id="structtouch__instance__ctrl__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structtouch__instance__ctrl__t">&#9670;&nbsp;</a></span>touch_instance_ctrl_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct touch_instance_ctrl_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>TOUCH private control block. DO NOT MODIFY. Initialization occurs when <a class="el" href="group___t_o_u_c_h.html#gafa9a9e5c3000e3daedd1050fa0d942fd" title="Opens and configures the TOUCH Middle module. Implements touch_api_t::open. ">RM_TOUCH_Open()</a> is called. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ab7bab704c869657f87c020b7febb5a07"></a>uint32_t</td>
<td class="fieldname">
open</td>
<td class="fielddoc">
Whether or not driver is open. </td></tr>
<tr><td class="fieldtype">
<a id="a6de5b5906a2eb2bf98ea1446b183318c"></a><a class="el" href="group___t_o_u_c_h.html#structtouch__button__info__t">touch_button_info_t</a></td>
<td class="fieldname">
binfo</td>
<td class="fielddoc">
Information of button. </td></tr>
<tr><td class="fieldtype">
<a id="a7e235611f808982b1d092adc3f074cdb"></a><a class="el" href="group___t_o_u_c_h.html#structtouch__slider__info__t">touch_slider_info_t</a></td>
<td class="fieldname">
sinfo</td>
<td class="fielddoc">
Information of slider. </td></tr>
<tr><td class="fieldtype">
<a id="a14b3b61451692ffd4513d3bf8654c898"></a><a class="el" href="group___t_o_u_c_h.html#structtouch__wheel__info__t">touch_wheel_info_t</a></td>
<td class="fieldname">
winfo</td>
<td class="fielddoc">
Information of wheel. </td></tr>
<tr><td class="fieldtype">
<a id="a375f7cc4a3dea84f06a892f95fc1da34"></a><a class="el" href="group___t_o_u_c_h___a_p_i.html#structtouch__cfg__t">touch_cfg_t</a> const  *</td>
<td class="fieldname">
p_touch_cfg</td>
<td class="fielddoc">
Pointer to initial configurations. </td></tr>
<tr><td class="fieldtype">
<a id="a0e9be579ea8c2bdfa9deec70b7a4bcbf"></a><a class="el" href="group___c_t_s_u___a_p_i.html#structctsu__instance__t">ctsu_instance_t</a> const  *</td>
<td class="fieldname">
p_ctsu_instance</td>
<td class="fielddoc">
Pointer to CTSU instance. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gafa9a9e5c3000e3daedd1050fa0d942fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa9a9e5c3000e3daedd1050fa0d942fd">&#9670;&nbsp;</a></span>RM_TOUCH_Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> RM_TOUCH_Open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___t_o_u_c_h___a_p_i.html#ga2c561c31be5889b86a8a984a1384920d">touch_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___t_o_u_c_h___a_p_i.html#structtouch__cfg__t">touch_cfg_t</a> const *const&#160;</td>
          <td class="paramname"><em>p_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens and configures the TOUCH Middle module. Implements <a class="el" href="group___t_o_u_c_h___a_p_i.html#a229c13bc7250c5977054d981680e41ad">touch_api_t::open</a>. </p>
<p>Example: </p><div class="fragment"><div class="line"></div><div class="line">    err = <a class="code" href="group___t_o_u_c_h.html#gafa9a9e5c3000e3daedd1050fa0d942fd">RM_TOUCH_Open</a>(&amp;g_touch_ctrl, &amp;g_touch_cfg);</div><div class="line">    handle_error(err);</div><div class="line"></div></div><!-- fragment --> <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>TOUCH successfully configured. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Null pointer, or one or more configuration options is invalid. </td></tr>
    <tr><td class="paramname">FSP_ERR_ALREADY_OPEN</td><td>Module is already open. This module can only be opened once. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>Configuration parameter error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad399083eda1add2a5f1e133df1089b82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad399083eda1add2a5f1e133df1089b82">&#9670;&nbsp;</a></span>RM_TOUCH_ScanStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> RM_TOUCH_ScanStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___t_o_u_c_h___a_p_i.html#ga2c561c31be5889b86a8a984a1384920d">touch_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function should be called each time a periodic timer expires. </p>
<p>The first several calls are used to establish a baseline for the sensors. Once that is complete, normal processing of the data from the last scan occurs. If a different method should be run on the next scan, that is set up as well, then the next scan is started. Implements <a class="el" href="group___t_o_u_c_h___a_p_i.html#a8064118d8b22b24a63cd18fc8db9c072">touch_api_t::scanStart</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Successfully started. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Null pointer. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Module is not open. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga17fbc878cd5f90062565187686358ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga17fbc878cd5f90062565187686358ad1">&#9670;&nbsp;</a></span>RM_TOUCH_DataGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> RM_TOUCH_DataGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___t_o_u_c_h___a_p_i.html#ga2c561c31be5889b86a8a984a1384920d">touch_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>p_button_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_slider_position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_wheel_position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the 64-bit mask indicating which buttons are pressed. </p>
<p>Also, this function gets the current position of where slider or wheel is being pressed. Implements <a class="el" href="group___t_o_u_c_h___a_p_i.html#a275464ffc43790ae8a787e7f2f3544d0">touch_api_t::dataGet</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Successfully data decoded. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Null pointer. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Module is not open. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0dd11aec558632e59df46765cfb546c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0dd11aec558632e59df46765cfb546c5">&#9670;&nbsp;</a></span>RM_TOUCH_Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> RM_TOUCH_Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___t_o_u_c_h___a_p_i.html#ga2c561c31be5889b86a8a984a1384920d">touch_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables specified TOUCH control block. Implements <a class="el" href="group___t_r_a_n_s_f_e_r___a_p_i.html#ade5973e7a8e994f9146e0db84bee8bf4">transfer_api_t::close</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Successfully closed. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Null pointer, or one or more configuration options is invalid. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Module is not open. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5de8394a70335511e9685b2aa2ea395d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5de8394a70335511e9685b2aa2ea395d">&#9670;&nbsp;</a></span>RM_TOUCH_VersionGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> RM_TOUCH_VersionGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#unionfsp__version__t">fsp_version_t</a> *const&#160;</td>
          <td class="paramname"><em>p_version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return TOUCH Middle module version. Implements <a class="el" href="group___t_o_u_c_h___a_p_i.html#a2b34120d3619a9fc2223b53c5c372327">touch_api_t::versionGet</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Version information successfully read. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Null pointer passed as a parameter </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP v0.8.0 User's Manual Rev0.80 R11UM0137EU0080 Copyright © (2019) Renesas Electronics Corporation. All Rights Reserved.</li>
    <li class="footer">Generated by FSP v0.8.0
    </li>
  </ul>
</div>
</body>
</html>
