<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: AWS Secure Sockets</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v2.0.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___a_w_s___s_e_c_u_r_e___s_o_c_k_e_t_s.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">AWS Secure Sockets<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This module provides the AWS Secure Sockets implementation. </p>
<h1>Overview</h1>
<h2>Features</h2>
<p>Information about the features provided by the AWS Secure Sockets Library is available in the <a href="https://docs.aws.amazon.com/freertos/latest/userguide/secure-sockets.html">FreeRTOS Libraries User Guide.</a></p>
<p>The FSP implementation supports using Secure Sockets with either Ethernet or WiFi. These stacks can be added in FSP via the RA Configuration editor under FreeRTOS | Secure Sockets.</p>
<h2>Dependencies</h2>
<p>The Secure Sockets library has two dependencies:</p>
<ol type="1">
<li>A TCP/IP implementation</li>
<li>A TLS implementation</li>
</ol>
<p>For TCP/IP, AWS have provided the FreeRTOS TCP/IP implementation.  For TLS, AWS have chosen mbedTLS, but use PKCS11 for storage and invoking the crypto portion of mbedTLS. For more information about AWS Secure Sockets, refer to the <a href="https://docs.aws.amazon.com/freertos/latest/userguide/secure-sockets.html">AWS documentation</a>. An example of Secure Sockets usage is on the same page.</p>
<h2>mbedTLS</h2>
<p><a href="https://tls.mbed.org/">mbedTLS</a> is ARM's implementation of the TLS and SSL protocols as well as the cryptographic primitives required by those implementations. mbedTLS is also solely used for its cryptographic features even if the TLS/SSL portions are not used.  With <a href="https://developer.arm.com/architectures/security-architectures/platform-security-architecture">PSA</a>, ARM have created a separate API for cryptography. Starting with mbedTLS3, crypto implementation has been moved out to a new module called mbedCrypto (PSA Crypto API) and a build time configuration can direct the mbedTLS3 implementation to use either the old mbedtls cryptography functions or use the new PSA Crypto API. Since the current version of mbedCrypto (PSA Crypto API) implements both the old mbedtls crypto API as well as the new PSA Crypto API, either option is functional for now. </p>
<h2>CipherSuites</h2>
<p>During the TLS connection setup stage, the client has to indicate to the server the type of cryptographic operations that it supports. This is referred to as the ciphersuite. The entire list of ciphersuites supported by mbedTLS can be found in mbedtls/ssl_ciphersuites.h.</p>
<h2>Configuration</h2>
<p>In FSP, Secure Sockets can be added as a new stack via FreeRTOS | Secure Sockets | Secure Sockets on WiFi or Secure Sockets on FreeRTOS Plus TCP. All required dependant modules, except heap, are automatically added. To complete the configuration,</p><ul>
<li>Add a heap instance and use the same one for all dependencies.</li>
<li>Resolve the module configuration requirements.</li>
</ul>
<h1>Usage Notes</h1>
<p>For detailed documentation on Secure Sockets consult the <a href="https://docs.aws.amazon.com/freertos/latest/userguide/secure-sockets.html">AWS documentation</a>.</p>
<h1><a class="anchor" id="renesas-aws-secure_sockets-examples"></a>
Examples</h1>
<h2>Basic Example</h2>
<p>This is a basic example of using the Secure Sockets API with Ethernet. The message "hello, world!" is sent to a remote socket.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#define SECURE_SOCKETS_EXAMPLE_BUFFER_SIZE    (64)</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> SERVER_CERTIFICATE_PEM[] =</div><div class="line">    <span class="stringliteral">&quot;-----BEGIN CERTIFICATE-----\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;MIIDazCCAlOgAwIBAgIURabL79ayIywQv0y8SPnbZ1FYDRIwDQYJKoZIhvcNAQEL\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;BQAwRTELMAkGA1UEBhMCQVUxEzARBgNVBAgMClNvbWUtU3RhdGUxITAfBgNVBAoM\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;GEludGVybmV0IFdpZGdpdHMgUHR5IEx0ZDAeFw0xOTA5MTEyMTIyMjZaFw0yMDA5\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;MTAyMTIyMjZaMEUxCzAJBgNVBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEw\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;HwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQwggEiMA0GCSqGSIb3DQEB\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;AQUAA4IBDwAwggEKAoIBAQDSA3h+5sT58FHgnovnQzsVHQ0H/3TsnEKwVzyBwTQl\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;s4PbG6VXCWyyJWjdJ4XMH1oU8gAlxauFbwOO98Aquei4K3Pi/ynKNBeX4VJcLyE5\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;Azq7nRIIwt4+OoZ5kV7v8JIoLY5i+Ktn3zq1t0y1ZmK6Uk/rRPonb+Kx7wQPx7jq\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;ZIZGda+CgF6ZedidPcABuggqD1y3U2gLiRPoBhe9nN2hG60rRp7vhbWMF0pzTDXu\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;BKF7XSTbhYz3pl6NeOCLh5E3t8x908Ui5W1zDN3iOysrcwQFtCiGTvzNtxSfli1+\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;PugIt9Q2vlYmuz5qI+juxHftJSXO86M5SV7exqUOXP9RAgMBAAGjUzBRMB0GA1Ud\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;DgQWBBQG8VNJEJUjpTKMjmrOY3XApNp5lDAfBgNVHSMEGDAWgBQG8VNJEJUjpTKM\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;jmrOY3XApNp5lDAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQAt\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;CabfjsYUnG8tt3/GDdhjsuG+SfeQe11S73pZi3+L616bPH5MNUv+LkgR/1AFEqt5\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;WadKVTgzW5Ork1t7CfkYwrOHbyhyaaDPzERjMCfCcl8lQluBy6vE/lEb0hWq6XlO\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;f6+8i+VKxWkSIXs2ZQqqYSOTTzAjHSsiiuE5WsC00ErvCvnC7uD6+3Y7W1uQRkFZ\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;uSd9AN1ixPvAFi69FF/ymlJv6vII5GXOVDrIwdr50bMNuezMEx6qMNDADRH8iEaL\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;JaSgfklczGiI1i7MPD4JTtsXOgKwxcBDAa0zQDVA5uBGEIOhva3m5X70N4iO7W0V\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;eEhZekKeg3Fl3t/CXi8l\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;-----END CERTIFICATE-----&quot;</span>;</div><div class="line"></div><div class="line"><span class="preprocessor">#define keyCLIENT_CERTIFICATE_PEM                                        \</span></div><div class="line"><span class="preprocessor">    &quot;-----BEGIN CERTIFICATE-----\n&quot;                                      \</span></div><div class="line"><span class="preprocessor">    &quot;MIIDETCCAfkCFHwd2yn8zn5qB2ChYUT9Mvbi9Xp1MA0GCSqGSIb3DQEBCwUAMEUx\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;CzAJBgNVBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRl\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;cm5ldCBXaWRnaXRzIFB0eSBMdGQwHhcNMTkwOTExMjEyMjU0WhcNMjAwOTEwMjEy\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;MjU0WjBFMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UE\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;CgwYSW50ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOC\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;AQ8AMIIBCgKCAQEAo8oThJXSMDo41oL7HTpC4TX8NalBvnkFw30Av67dl/oZDjVA\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;iXPnZkhVppLnj++0/Oed0M7UwNUO2nurQt6yTYrvW7E8ZPjAlC7ueJcGYZhOaVv2\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;bhSmigjFQru2lw5odSuYy5+22CCgxft58nrRCo5Bk+GwWgZmcrxe/BzutRHQ7X4x\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;dYJhyhBOi2R1Kt8XsbuWilfgfkVhhkVklFeKqiypdQM6cnPWo/G4DyW34jOXzzEM\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;FLWvQOQLCKUZOgjJBnFdbx8oOOwMkYCChbV7gqPE6cw0Zy26CvlLQiINyonLPbNT\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;c64sS/ZBGPZFOPJmb4tG2nipYgZ1hO/r++jCbwIDAQABMA0GCSqGSIb3DQEBCwUA\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;A4IBAQCdqq59ubdRY9EiV3bleKXeqG7+8HgBHdm0X9dgq10nD37p00YLyuZLE9NM\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;066G/VcflGrx/Nzw+/UuI7/UuBbBS/3ppHRnsZqBIl8nnr/ULrFQy8z3vKtL1q3C\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;DxabjPONlPO2keJeTTA71N/RCEMwJoa8i0XKXGdu/hQo6x4n+Gq73fEiGCl99xsc\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;4tIO4yPS4lv+uXBzEUzoEy0CLIkiDesnT5lLeCyPmUNoU89HU95IusZT7kygCHHd\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;72am1ic3X8PKc268KT3ilr3VMhK67C+iIIkfrM5AiU+oOIRrIHSC/p0RigJg3rXA\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;GBIRHvt+OYF9fDeG7U4QDJNCfGW+\n&quot;                                     \</span></div><div class="line"><span class="preprocessor">    &quot;-----END CERTIFICATE-----&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define keyCLIENT_PRIVATE_KEY_PEM                                        \</span></div><div class="line"><span class="preprocessor">    &quot;-----BEGIN RSA PRIVATE KEY-----\n&quot;                                  \</span></div><div class="line"><span class="preprocessor">    &quot;MIIEowIBAAKCAQEAo8oThJXSMDo41oL7HTpC4TX8NalBvnkFw30Av67dl/oZDjVA\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;iXPnZkhVppLnj++0/Oed0M7UwNUO2nurQt6yTYrvW7E8ZPjAlC7ueJcGYZhOaVv2\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;bhSmigjFQru2lw5odSuYy5+22CCgxft58nrRCo5Bk+GwWgZmcrxe/BzutRHQ7X4x\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;dYJhyhBOi2R1Kt8XsbuWilfgfkVhhkVklFeKqiypdQM6cnPWo/G4DyW34jOXzzEM\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;FLWvQOQLCKUZOgjJBnFdbx8oOOwMkYCChbV7gqPE6cw0Zy26CvlLQiINyonLPbNT\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;c64sS/ZBGPZFOPJmb4tG2nipYgZ1hO/r++jCbwIDAQABAoIBAQCGR2hC/ZVJhqIM\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;c2uuJZKpElpIIBBPOObZwwS3IYR4UUjzVgMn7UbbmxflLXD8lzfZU4YVp0vTH5lC\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;07qvYuXpHqtnj+GEok837VYCtUY9AuHeDM/2paV3awNV15E1PFG1Jd3pqnH7tJw6\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;VBZBDiGNNt1agN/UnoSlMfvpU0r8VGPXCBNxe3JY5QyBJPI1wF4LcxRI+eYmr7Ja\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;/cjn97DZotgz4B7gUNu8XIEkUOTwPabZINY1zcLWiXTMA+8qTniPVk653h14Xqt4\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;4o4D4YCTpwJcmxSV1m21/6+uyuXr9SIKAE+Ys2cYLA46x+rwLaW5fUoQ5hHa0Ytb\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;RYJ4SrtBAoGBANWtwlE69N0hq5xDPckSbNGubIeG8P4mBhGkJxIqYoqugGLMDiGX\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;4bltrjr2TPWaxTo3pPavLJiBMIsENA5KU+c/r0jLkxgEp9MIVJrtNgkCiDQqogBG\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;j4IJL2iQwXoLCqk2tx/dh9Mww+7SETE7EPNrv4UrYaGN5AEvpf5W+NHPAoGBAMQ6\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;wVa0Mx1PlA4enY2rfE3WXP8bzjleSOwR75JXqG2WbPC0/cszwbyPWOEqRpBZfvD/\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;QFkKx06xp1C09XwiQanr2gDucYXHeEKg/9iuJV1UkMQp95ojlhtSXdRZV7/l4pmN\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;fpB2vcAptX/4gY4tDrWMO08JNnRjE7duC+rmmk1hAoGAS4L0QLCNB/h2JOq+Uuhn\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;/FGfmOVfFPFrA6D3DbxcxpWUWVWzSLvb0SOphryzxbfEKyau7V5KbDp7ZSU/IC20\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;KOygjSEkAkDi7fjrrTRW/Cgg6g6G4YIOBO4qCtHdDbwJMHNdk6096qw5EZS67qLp\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;Apz5OZ5zChySjri/+HnTxJECgYBysGSP6IJ3fytplTtAshnU5JU2BWpi3ViBoXoE\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;bndilajWhvJO8dEqBB5OfAcCF0y6TnWtlT8oH21LHnjcNKlsRw0Dvllbd1oylybx\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;3da41dRG0sCEtoflMB7nHdDLt/DZDnoKtVvyFG6gfP47utn+Ahgn+Zp6K+46J3eP\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;s3g8AQKBgE/PJiaF8pbBXaZOuwRRA9GOMSbDIF6+jBYTYp4L9wk4+LZArKtyI+4k\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;Md2DUvHwMC+ddOtKqjYnLm+V5cSbvu7aPvBZtwxghzTUDcf7EvnA3V/bQBh3R0z7\n&quot; \</span></div><div class="line"><span class="preprocessor">    &quot;pVsxTyGRmBSeLdbUWACUbX9LXdpudarPAJ59daWmP3mBEVmWdzUw\n&quot;             \</span></div><div class="line"><span class="preprocessor">    &quot;-----END RSA PRIVATE KEY-----&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> uint8_t g_ip_address[4]      = {169, 254, 57, 49};</div><div class="line"><span class="keyword">const</span> uint8_t g_net_mask[4]        = {255, 255, 0, 0};</div><div class="line"><span class="keyword">const</span> uint8_t g_gateway_address[4] = {169, 254, 57, 49};</div><div class="line"><span class="keyword">const</span> uint8_t g_dns_address[4]     = {8, 8, 8, 8};</div><div class="line"><span class="keyword">const</span> uint8_t g_mac_address[6]     = {0x66, 0x66, 0x66, 0x66, 0x66, 0x66};</div><div class="line"></div><div class="line"><span class="keyword">static</span> uint8_t g_buffer[SECURE_SOCKETS_EXAMPLE_BUFFER_SIZE];</div><div class="line"></div><div class="line"><span class="comment">/***********************************************************************************************************************</span></div><div class="line"><span class="comment"> * Refer to the following link for detailed API information:</span></div><div class="line"><span class="comment"> * https://docs.aws.amazon.com/freertos/latest/lib-ref/html2/secure_sockets/secure_sockets_function_primary.html</span></div><div class="line"><span class="comment"> **********************************************************************************************************************/</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> secure_sockets_ethernet_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="comment">/* Initialize the crypto hardware acceleration. */</span></div><div class="line">    <a class="code" href="group___r_m___p_s_a___c_r_y_p_t_o.html#gaf0f37c11be234650bec95ce37e9a4a6b">mbedtls_platform_setup</a>(NULL);</div><div class="line"></div><div class="line">    xLoggingTaskInitialize(256, 1, 10); <span class="comment">// NOLINT(readability-magic-numbers)</span></div><div class="line"></div><div class="line">    ProvisioningParams_t params;</div><div class="line"></div><div class="line">    <span class="comment">/* Write the keys into a secure region in data flash. */</span></div><div class="line">    params.pucClientPrivateKey       = (uint8_t *) keyCLIENT_PRIVATE_KEY_PEM;</div><div class="line">    params.pucClientCertificate      = (uint8_t *) keyCLIENT_CERTIFICATE_PEM;</div><div class="line">    params.ulClientPrivateKeyLength  = 1 + strlen((<span class="keyword">const</span> <span class="keywordtype">char</span> *) params.pucClientPrivateKey);</div><div class="line">    params.ulClientCertificateLength = 1 + strlen((<span class="keyword">const</span> <span class="keywordtype">char</span> *) params.pucClientCertificate);</div><div class="line">    params.pucJITPCertificate        = NULL;</div><div class="line">    params.ulJITPCertificateLength   = 0;</div><div class="line">    vAlternateKeyProvisioning(&amp;params);</div><div class="line"></div><div class="line">    <span class="comment">/* Start up the network stack. */</span></div><div class="line">    FreeRTOS_IPInit(g_ip_address, g_net_mask, g_gateway_address, g_dns_address, g_mac_address);</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (pdFALSE == FreeRTOS_IsNetworkUp())</div><div class="line">    {</div><div class="line">        vTaskDelay(1);</div><div class="line">    }</div><div class="line"></div><div class="line">    Socket_t socket = <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#ga6e00cf6c640c792904f3ee93aae0dc68">SOCKETS_Socket</a>(SOCKETS_AF_INET, SOCKETS_SOCK_STREAM, SOCKETS_IPPROTO_TCP);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (SOCKETS_INVALID_SOCKET == socket)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Could not create socket. */</span></div><div class="line">        __BKPT(0);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Enable TLS and configure the server certificate. */</span></div><div class="line">    <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#ga0b03ee3960134967aca956e38bb2eb91">SOCKETS_SetSockOpt</a>(socket, 0, SOCKETS_SO_REQUIRE_TLS, NULL, (<span class="keywordtype">size_t</span>) 0);</div><div class="line">    <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#ga0b03ee3960134967aca956e38bb2eb91">SOCKETS_SetSockOpt</a>(socket, 0, SOCKETS_SO_TRUSTED_SERVER_CERTIFICATE, SERVER_CERTIFICATE_PEM,</div><div class="line">                       <span class="keyword">sizeof</span>(SERVER_CERTIFICATE_PEM));</div><div class="line"></div><div class="line">    <span class="comment">/* Connect to a remote server */</span></div><div class="line">    SocketsSockaddr_t server_addr;</div><div class="line">    server_addr.usPort    = SOCKETS_htons(9001);</div><div class="line">    server_addr.ulAddress = SOCKETS_inet_addr_quick(192, 168, 0, 3);</div><div class="line">    <span class="keywordflow">if</span> (0 != <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#ga3b14394dd69774243321bc20bf9fc8ad">SOCKETS_Connect</a>(socket, &amp;server_addr, <span class="keyword">sizeof</span>(server_addr)))</div><div class="line">    {</div><div class="line">        <span class="comment">/* Could not connect to server. */</span></div><div class="line">        __BKPT(0);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Send a message and check that the correct number of bytes were transferred */</span></div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> msg[] = <span class="stringliteral">&quot;hello, world!\n&quot;</span>;</div><div class="line">    <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(msg) != <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#ga030b79a601e81b7b467cf51aa02c49e8">SOCKETS_Send</a>(socket, msg, <span class="keyword">sizeof</span>(msg), 0))</div><div class="line">    {</div><div class="line">        <span class="comment">/* Failed to send data. */</span></div><div class="line">        __BKPT(0);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (0 != <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#ga98d8bd952d07d1e6978ada2db9d0abd1">SOCKETS_Shutdown</a>(socket, SOCKETS_SHUT_RDWR))</div><div class="line">    {</div><div class="line">        __BKPT(0);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Follow socket shutdown example:</span></div><div class="line"><span class="comment">     * https://freertos.org/FreeRTOS-Plus/FreeRTOS_Plus_TCP/API/close.html</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keywordflow">while</span> (0 &lt;= <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#ga93dc4642557583aafeaa573a4d20c4a0">SOCKETS_Recv</a>(socket, g_buffer, <span class="keyword">sizeof</span>(g_buffer), 0))</div><div class="line">    {</div><div class="line">        vTaskDelay(10);</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#gab1ee7b53c373d05e6f31f94ba05b9d68">SOCKETS_Close</a>(socket);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> * pcApplicationHostnameHook (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line"></div><div class="line">    <span class="comment">/* Assign the name &quot;FreeRTOS&quot; to this network node.  This function will</span></div><div class="line"><span class="comment">     * be called during the DHCP: the machine will be registered with an IP</span></div><div class="line"><span class="comment">     * address plus this name. */</span></div><div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;FreeRTOS&quot;</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> vApplicationIPNetworkEventHook (eIPCallbackEvent_t eNetworkEvent)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gaf0afcbc9a110ac9366a811d96ee06029">FSP_PARAMETER_NOT_USED</a>(eNetworkEvent);</div><div class="line">}</div><div class="line"></div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP Release v2.0.0 User's Manual Copyright © (2020) Renesas Electronics Corporation. All Rights Reserved.</li>
  </ul>
</div>
</body>
</html>
