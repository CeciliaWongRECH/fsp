<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: Parallel Data Capture (r_pdc)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <script type="text/javascript" src="search/lunr.js"></script>
    <link href="search/lunrsearch.css" rel="stylesheet" type="text/css">
    <script src="search/lunr_index.js"></script>
    <script src="search/lunrclient.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v3.6.0</span>
   </div>
  </td>
   <td>        <br /><div id="MSearchBox" class="MSearchBoxInactive">
 
    <form id="lunrSearchForm" name="lunrSearchForm">
      <span class="left" >
          <img id="MSearchSelect" src="search/mag_sel.png"
               alt=""/>
         <input class="search-input" id="MSearchField" name="q" placeholder="Search" type="text"> 
      </span>
      <span class="right">
          &nbsp; 
      </span>
        <!--<input type="submit" value="Search">-->
    </form>
</div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___p_d_c.html','');});
</script>

<script src="search/mark.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() { 
    var options = {         // allows highlighting across element boundaries.
      "acrossElements": true
    };
    var bodyText = $("div.contents").text(); // try contents instead of body. 
    // If using body: Problem may be that text inside <script> tags is included in .text() - but not in cheerio?
    // If using div.contents - works 
    var fullURL = $(location).attr('href');
    var splitURL = fullURL.split("?");  // Get param string: content after "?" in URL
    if (splitURL.length > 1) {          // If any content after "?"
      var paramStr = splitURL[1];
      var params = paramStr.split("&"); // Split params on "&"
      for (i = 0; i < params.length; i++) {
        var paramPair = params[i].split("=");
        if (paramPair[0] == "pos") {     // If any param starts "pos", get the content after "="
          posStr = paramPair[1];
          var splitPos = posStr.split(",");
          var termArray = [];
        // termArray will have the search terms
            for (i=0; i < splitPos.length; i += 2) {
            start = splitPos[i];
            len = splitPos[i+1]; // Needs error detection! Vulnerable if non-even # of pos entries
            term = bodyText.substr(start,len);
            if (termArray.includes(term) == false) {     // List all unique terms
                termArray.push(bodyText.substr(start,len)); 
            }
          } 
    //      console.log(termArray);
          var context = document.querySelector("div.contents");
          var instance = new Mark(context);
          for(i=0;i<termArray.length; i+=1) {
            instance.mark(termArray[i],options);  // Use Mark.js to mark all terms in termArray
            }    
          var firstMark = document.querySelector("mark");
          firstMark.scrollIntoView(true);
          //      console.log($("mark").first().text()); // Trying to scroll to first Mark element. 
        }
            }
    }
  });
</script>

<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />

<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<!-- Lunr search results -->
<div id="lunrResultBox" style="
        position: fixed;
        border: 1px solid black;
        background-color: WhiteSmoke;  
        padding: 10px;
        width: 500px;
        height: 500px;
        top: 30;
        right: 0;
        overflow: auto;
        display: none">
    <button onclick="closeLunrResults()" style="float: right;">X</button>
    <div class="resultCount" id="resultCount"></div>
    <div id="searchResults"></div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">Parallel Data Capture (r_pdc)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga37bc265a61b2aa8735d74acd3a94c88c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_d_c.html#ga37bc265a61b2aa8735d74acd3a94c88c">R_PDC_Open</a> (<a class="el" href="group___p_d_c___a_p_i.html#ga6bb625506dc92e3aef9fc154addb9663">pdc_ctrl_t</a> *const p_api_ctrl, <a class="el" href="group___p_d_c___a_p_i.html#structpdc__cfg__t">pdc_cfg_t</a> const *const p_cfg)</td></tr>
<tr class="memdesc:ga37bc265a61b2aa8735d74acd3a94c88c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Powers on PDC, handles required initialization described in the hardware manual.  <a href="#ga37bc265a61b2aa8735d74acd3a94c88c">More...</a><br /></td></tr>
<tr class="separator:ga37bc265a61b2aa8735d74acd3a94c88c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05be16f0b97684be7c5276a915766d86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_d_c.html#ga05be16f0b97684be7c5276a915766d86">R_PDC_Close</a> (<a class="el" href="group___p_d_c___a_p_i.html#ga6bb625506dc92e3aef9fc154addb9663">pdc_ctrl_t</a> *const p_api_ctrl)</td></tr>
<tr class="memdesc:ga05be16f0b97684be7c5276a915766d86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops and closes the transfer interface, disables and powers off the PDC, clears internal driver data and disables interrupts.  <a href="#ga05be16f0b97684be7c5276a915766d86">More...</a><br /></td></tr>
<tr class="separator:ga05be16f0b97684be7c5276a915766d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ef8ec2670efe6a82faf4b5059c8d933"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_d_c.html#ga6ef8ec2670efe6a82faf4b5059c8d933">R_PDC_CaptureStart</a> (<a class="el" href="group___p_d_c___a_p_i.html#ga6bb625506dc92e3aef9fc154addb9663">pdc_ctrl_t</a> *const p_api_ctrl, uint8_t *const p_buffer)</td></tr>
<tr class="memdesc:ga6ef8ec2670efe6a82faf4b5059c8d933"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a capture. Enables interrupts.  <a href="#ga6ef8ec2670efe6a82faf4b5059c8d933">More...</a><br /></td></tr>
<tr class="separator:ga6ef8ec2670efe6a82faf4b5059c8d933"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver for the PDC peripheral on RA MCUs. This module implements the <a class="el" href="group___p_d_c___a_p_i.html">PDC Interface</a>. </p>
<h1><a class="anchor" id="r-pdc-overview"></a>
Overview</h1>
<p>The PDC peripheral supports interfacing with external cameras by accepting timing and data signals in order to capture incoming data. A callback is invoked every time a frame of data is accepted.</p>
<h2><a class="anchor" id="r-pdc-features"></a>
Features</h2>
<ul>
<li><a class="anchor" id="um_pdc_image_data_storage"></a>Capture incoming data into a user defined buffer</li>
<li><a class="anchor" id="um_pdc_configure_bytes_per_pixel"></a>Data bytes per pixel can be configured</li>
<li><a class="anchor" id="um_pdc_configure_data_format"></a>Endianess of the incoming data can be specified</li>
<li><a class="anchor" id="um_pdc_capture_image_resolution"></a>Supports configuring capture width and height</li>
<li><a class="anchor" id="um_pdc_configure_sync_polarity"></a>Supports configuring vertical and horizontal sync polarity</li>
<li><a class="anchor" id="um_pdc_capture_image_start_position"></a>Horizontal and Vertical position for image/data capture can be specified</li>
<li><a class="anchor" id="um_pdc_configure_output_clock"></a>External clock to the camera module can be adjusted</li>
<li><a class="anchor" id="um_pdc_interface_for_data_transfer"></a>Choice between DMA and DTC to transfer out the captured data</li>
<li><a class="anchor" id="um_pdc_user_notification"></a>The specified user callback is invoked when a data frame is captured </li>
</ul>
<h1><a class="anchor" id="r-pdc-configuration"></a>
Configuration</h1>
<p><h2>Build Time Configurations for r_pdc</h2>
The following build time configurations are defined in fsp_cfg/r_pdc_cfg.h:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr>
<td>Parameter Checking</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Default (BSP)</li>
<li>
Enabled</li>
<li>
Disabled</li>
</ul>
</td><td>Default (BSP) </td><td>If selected code for parameter checking is included in the build. </td></tr>
</table>
 <h2>Configurations for Graphics &gt; Parallel Data Capture (r_pdc)</h2>
This module can be added to the Stacks tab via New Stack &gt; Graphics &gt; Parallel Data Capture (r_pdc).<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr>
<td>General &gt; Name</td><td>Name must be a valid C symbol</td><td>g_pdc0 </td><td>Module name. </td></tr>
<tr>
<td>Input &gt; Signal polarity &gt; HSYNC</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
High</li>
<li>
Low</li>
</ul>
</td><td>High </td><td>Specify the active polarity of the HSYNC signal. </td></tr>
<tr>
<td>Input &gt; Signal polarity &gt; VSYNC</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
High</li>
<li>
Low</li>
</ul>
</td><td>High </td><td>Specify the active polarity of the VSYNC signal. </td></tr>
<tr>
<td>Input &gt; Capture Specifications &gt; Number of pixels to capture horizontally</td><td>Value must be an integer greater than 0</td><td>640 </td><td>Specify the number of horizontal pixels to capture. </td></tr>
<tr>
<td>Input &gt; Capture Specifications &gt; Number of lines to capture vertically</td><td>Value must be an integer greater than 0</td><td>480 </td><td>Specify the number of vertical pixels to capture. </td></tr>
<tr>
<td>Input &gt; Capture Specifications &gt; Horizontal pixel to start capture from</td><td>Value must be an integer</td><td>0 </td><td>Specify the horizontal pixel to start capturing image data from. Allows an image smaller than the native resolution of a camera to be captured. </td></tr>
<tr>
<td>Input &gt; Capture Specifications &gt; Line to start capture from</td><td>Value must be an integer</td><td>0 </td><td>Specify the vertical line to start capturing image data from. Allows an image smaller than the native resolution of a camera to be captured. </td></tr>
<tr>
<td>Input &gt; Bytes per pixel</td><td>Value must be an integer greater than 0</td><td>2 </td><td>Specify the number of bytes per pixel of the captured image data. </td></tr>
<tr>
<td>Input &gt; Clock divider</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
CLK/2</li>
<li>
CLK/4</li>
<li>
CLK/6</li>
<li>
CLK/8</li>
<li>
CLK/10</li>
<li>
CLK/12</li>
<li>
CLK/14</li>
<li>
CLK/16</li>
</ul>
</td><td>CLK/2 </td><td>Specify the clock divider of the clock input to the PDC peripheral. </td></tr>
<tr>
<td>Input &gt; Endianess</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Little</li>
<li>
Big</li>
</ul>
</td><td>Little </td><td>Specify the endianness of the captured image data. </td></tr>
<tr>
<td>Output &gt; Buffer &gt; Image buffer name</td><td>Name must be a valid C symbol</td><td>g_user_buffer </td><td>Specify the name of the data buffer to create or set to NULL, if it is to be created by the user external to the PDC driver. </td></tr>
<tr>
<td>Output &gt; Buffer &gt; Image buffer section</td><td>This property must be a valid section name</td><td>.bss </td><td>Specify the RAM section for the image data buffer. Typically .bss (internal RAM) or .sdram. When Arm Compiler 6 is used to place this memory in on-chip SRAM, the section name must be .bss or start with .bss. to avoid consuming unnecessary ROM space. </td></tr>
<tr>
<td>Output &gt; Buffer &gt; Number of image buffers</td><td>Value must be an integer greater than 0</td><td>1 </td><td>Specify the number of buffers to create. </td></tr>
<tr>
<td>Interrupts &gt; Callback</td><td>Name must be a valid C symbol</td><td>g_pdc_user_callback </td><td>A user callback function must be provided. This callback is invoked for every successful frame capture and any error conditions </td></tr>
<tr>
<td>Interrupts &gt; PDC Interrupt Priority</td><td>MCU Specific Options</td><td></td><td>Select the PDC interrupt priority. </td></tr>
<tr>
<td>Interrupts &gt; DTC Interrupt Priority</td><td>MCU Specific Options</td><td></td><td>Select the DTC interrupt priority. </td></tr>
</table>
</p>
<h2><a class="anchor" id="r-pdc-clock-configuration"></a>
Clock Configuration</h2>
<p>The PDC peripheral module uses the PCLKB as its clock source. The maximum clock to the camera module is PCLKB / 2.</p>
<h2><a class="anchor" id="r-pdc-pin-configuration"></a>
Pin Configuration</h2>
<p>The PCKO pin is a clock output and should be connected to the clock input of the camera. The PIXCLK pin is a clock input and should be connected to the output pixel clock of the camera. Likewise, the HSYNC and VSYNC pins must be connected to the horizontal and vertical sync signals of the camera, respectively. The PIXD0-PIXD7 pins are the 8-bit data bus input and should be connected to the relevant output pins of the camera.</p>
<dl class="section note"><dt>Note</dt><dd>Camera control and serial communication pins must be configured separately and are not controlled by this module.</dd></dl>
<h1><a class="anchor" id="r-pdc-usage_notes"></a>
Usage Notes</h1>
<h2><a class="anchor" id="r-pdc-interrupt-configuration"></a>
Interrupt Configuration</h2>
<ul>
<li>PDC error interrupts are used by this module for reporting errors such as overrun, underrun, vertical line number setting and horizontal byte number setting errors.</li>
<li>In addition to the PDC error interrupts, DMA or DTC interrupts are also used internally to perform data transfer from this peripheral to the specified image buffer.</li>
<li>Receive data ready interrupt is used as activation source for DMA and DTC trigger.</li>
</ul>
<h2><a class="anchor" id="r-pdc-enabling-transfer-modules"></a>
Enabling Transfer Modules</h2>
<ul>
<li>An option to select between DMAC or DTC is provided with DMA as the default transfer choice.</li>
<li>For further details on DMA please refer <a class="el" href="group___d_m_a_c.html">Direct Memory Access Controller (r_dmac)</a></li>
<li>For further details on DTC please refer <a class="el" href="group___d_t_c.html">Data Transfer Controller (r_dtc)</a></li>
</ul>
<h2><a class="anchor" id="r-pdc-setup-with-external-camera"></a>
PDC setup with external camera</h2>
<ul>
<li>Before configuring the external camera device the PDC Open API must be called in order to start clock output.</li>
<li>Ensure that the memory pointed to by p_buffer is both valid and large enough to store a complete image.</li>
<li>The amount of space required (in bytes) can be calculated as: size (bytes) = image width (pixels) * image height (lines) * number of bytes per pixel</li>
<li>Ensure that the size above is divisible by and aligned to 32 bytes.</li>
</ul>
<h1><a class="anchor" id="r-pdc-examples"></a>
Examples</h1>
<h2>Basic Example</h2>
<p>This is a basic example of minimal use of the PDC in an application. This example shows how this driver can be used for capturing data from an external I/O device such as an image sensor.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="keywordtype">void</span> g_pdc_user_callback (<a class="code" href="group___p_d_c___a_p_i.html#structpdc__callback__args__t">pdc_callback_args_t</a> * p_args)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___p_d_c___a_p_i.html#gga31162259e060f212b6d1cb04778f3adbad22565606f1dc388ea5c3102272ea7f3">PDC_EVENT_TRANSFER_COMPLETE</a> == p_args-&gt;<a class="code" href="group___p_d_c___a_p_i.html#a311c38c08e8717b53d7f98d1d61c6513">event</a>)</div><div class="line">    {</div><div class="line">        g_capture_ready = <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> basic_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Initialize the PDC module */</span></div><div class="line">    err = <a class="code" href="group___p_d_c.html#ga37bc265a61b2aa8735d74acd3a94c88c">R_PDC_Open</a>(&amp;g_pdc0_ctrl, &amp;g_pdc0_cfg);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Handle any errors. This function should be defined by the user. */</span></div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Initialize the camera module at this point. This implementation is camera vendor specific. */</span></div><div class="line">    camera_module_initialization();</div><div class="line"></div><div class="line">    <span class="comment">/* Initialize capture ready flag to false. This gets set to true in PDC callback upon successful frame capture. */</span></div><div class="line">    g_capture_ready = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"></div><div class="line">    err = <a class="code" href="group___p_d_c.html#ga6ef8ec2670efe6a82faf4b5059c8d933">R_PDC_CaptureStart</a>(&amp;g_pdc0_ctrl, g_user_buffer);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line"></div><div class="line">    uint32_t timeout_ms = PDC_DELAY_MS;</div><div class="line"></div><div class="line">    <span class="comment">/* Since there is nothing else to do, block until Callback triggers*/</span></div><div class="line">    <span class="keywordflow">while</span> ((<span class="keyword">true</span> != g_capture_ready) &amp;&amp; timeout_ms)</div><div class="line">    {</div><div class="line">        <a class="code" href="group___b_s_p___m_c_u.html#gaf3219448adfd1531cf69f68697ab184b">R_BSP_SoftwareDelay</a>(1U, <a class="code" href="group___b_s_p___m_c_u.html#ggafd98e2a6f080d6a52a3ef72e3d731b2ba59fcc4e8d51046d4a1bd63c87ac64913">BSP_DELAY_UNITS_MILLISECONDS</a>);</div><div class="line">        timeout_ms--;;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (0U == timeout_ms)</div><div class="line">    {</div><div class="line">        __BKPT(0);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> camera_module_initialization (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="comment">/* Camera vendor specific initialization to be done here */</span></div><div class="line">}</div><div class="line"></div></div><!-- fragment --><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structpdc__instance__ctrl__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_d_c.html#structpdc__instance__ctrl__t">pdc_instance_ctrl_t</a></td></tr>
<tr class="separator:structpdc__instance__ctrl__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structpdc__instance__ctrl__t" id="structpdc__instance__ctrl__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structpdc__instance__ctrl__t">&#9670;&nbsp;</a></span>pdc_instance_ctrl_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct pdc_instance_ctrl_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>PDC instance control block. DO NOT INITIALIZE. </p>
</div>
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga37bc265a61b2aa8735d74acd3a94c88c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga37bc265a61b2aa8735d74acd3a94c88c">&#9670;&nbsp;</a></span>R_PDC_Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_PDC_Open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___p_d_c___a_p_i.html#ga6bb625506dc92e3aef9fc154addb9663">pdc_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___p_d_c___a_p_i.html#structpdc__cfg__t">pdc_cfg_t</a> const *const&#160;</td>
          <td class="paramname"><em>p_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Powers on PDC, handles required initialization described in the hardware manual. </p>
<p>Implements <a class="el" href="group___p_d_c___a_p_i.html#a8990d4fe3eedd0988cd4f1398015db41">pdc_api_t::open</a>.</p>
<p>The Open function provides initial configuration for the PDC module. It powers on the module and enables the PCLKO output and the PIXCLK input. Further initialization requires the PIXCLK input to be running in order to be able to reset the PDC as part of its initialization. This clock is input from a camera module and so the reset and further initialization is performed in <a class="el" href="group___p_d_c___a_p_i.html#a110d0725d82910e086afb31056378b2b">pdc_api_t::captureStart</a>. This function should be called once prior to calling any other PDC API functions. After the PDC is opened the Open function should not be called again without first calling the Close function.</p>
<p>Example: </p><div class="fragment"><div class="line"></div><div class="line">    <span class="comment">/* Initialize the PDC module */</span></div><div class="line">    err = <a class="code" href="group___p_d_c.html#ga37bc265a61b2aa8735d74acd3a94c88c">R_PDC_Open</a>(&amp;g_pdc0_ctrl, &amp;g_pdc0_cfg);</div><div class="line"></div></div><!-- fragment --> <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Initialization was successful. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>One or more of the following parameters is NULL<ol type="1">
<li>p_cfg is NULL</li>
<li>p_api_ctrl is NULL</li>
<li>The pointer to the transfer interface in the p_cfg parameter is NULL</li>
<li>Callback parameter is NULL.</li>
<li>Invalid IRQ number assigned </li>
</ol>
</td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>One or more of the following parameters is incorrect<ol type="1">
<li>bytes_per_pixel is zero</li>
<li>x_capture_pixels is zero</li>
<li>y_capture_pixels is zero</li>
<li>x_capture_start_pixel + x_capture_pixels is greater than 4095, OR</li>
<li>y_capture_start_pixel + y_capture_pixels is greater than 4095 </li>
</ol>
</td></tr>
    <tr><td class="paramname">FSP_ERR_ALREADY_OPEN</td><td>Module is already open. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga05be16f0b97684be7c5276a915766d86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05be16f0b97684be7c5276a915766d86">&#9670;&nbsp;</a></span>R_PDC_Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_PDC_Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___p_d_c___a_p_i.html#ga6bb625506dc92e3aef9fc154addb9663">pdc_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops and closes the transfer interface, disables and powers off the PDC, clears internal driver data and disables interrupts. </p>
<p>Implements <a class="el" href="group___p_d_c___a_p_i.html#aa4d12908591f162b73df01012da87156">pdc_api_t::close</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Successful close. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>p_api_ctrl is NULL </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Open has not been successfully called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6ef8ec2670efe6a82faf4b5059c8d933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6ef8ec2670efe6a82faf4b5059c8d933">&#9670;&nbsp;</a></span>R_PDC_CaptureStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_PDC_CaptureStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___p_d_c___a_p_i.html#ga6bb625506dc92e3aef9fc154addb9663">pdc_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *const&#160;</td>
          <td class="paramname"><em>p_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a capture. Enables interrupts. </p>
<p>Implements <a class="el" href="group___p_d_c___a_p_i.html#a110d0725d82910e086afb31056378b2b">pdc_api_t::captureStart</a>.</p>
<p>Sets up the transfer interface to transfer data from the PDC into the specified buffer. Configures the PDC settings as previously set by the <a class="el" href="group___p_d_c___a_p_i.html#a8990d4fe3eedd0988cd4f1398015db41">pdc_api_t::open</a> API. These settings are configured here as the PIXCLK input must be active for the PDC reset operation. When a capture is complete the callback registered during <a class="el" href="group___p_d_c___a_p_i.html#a8990d4fe3eedd0988cd4f1398015db41">pdc_api_t::open</a> API call will be called.</p>
<p>Example: </p><div class="fragment"><div class="line"></div><div class="line">    err = <a class="code" href="group___p_d_c.html#ga6ef8ec2670efe6a82faf4b5059c8d933">R_PDC_CaptureStart</a>(&amp;g_pdc0_ctrl, g_user_buffer);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div></div><!-- fragment --> <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Capture start successful. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>One or more of the following parameters is NULL<ol type="1">
<li>p_api_ctrl is NULL</li>
<li>p_buffer is NULL while p_buffer field of the control structure is NULL </li>
</ol>
</td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Open has not been successfully called. </td></tr>
    <tr><td class="paramname">FSP_ERR_IN_USE</td><td>PDC transfer is already in progress. </td></tr>
    <tr><td class="paramname">FSP_ERR_TIMEOUT</td><td>Reset operation timed out. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP Release v3.6.0 User's Manual Copyright © (2022) Renesas Electronics Corporation. All Rights Reserved.</li>
  </ul>
</div>
</body>
</html>
